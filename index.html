<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>因為有你｜世界唐氏症日</title>
  <meta name="description" content="因為有你，這個世界｜世界唐氏症日 北捷彩繪列車活動" />
  <style>
    :root{
      --bg:#f5f7fb; --card:#fff; --text:#0b0f19;
      --muted:#586174; --primary:#2f63ff; --radius:18px;
    }
    body{
      margin:0;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    .wrap{max-width:780px;margin:0 auto;padding:18px}
    .card{
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:0 10px 25px rgba(0,0,0,.06);
      padding:16px;
      margin:12px 0;
    }
    .pill{
      display:inline-block;background:#111827;color:#fff;
      border-radius:999px;padding:4px 10px;font-size:12px;
    }
    h1{font-size:20px;margin:10px 0 6px}
    .sub{margin:0;color:var(--muted);line-height:1.5}
    .hero{
      width:100%;
      border-radius:14px;
      display:block;
      margin-top:12px;
      background:#eef2ff;
      object-fit:cover;
    }
    .btns{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
    button{
      border:0;border-radius:999px;padding:10px 14px;
      background:#eef2ff;color:#1a2b7a;font-weight:750;cursor:pointer;
    }
    button:hover{filter:brightness(.98)}
    .primary{background:var(--primary);color:#fff}
    .active{
      background:#111827;color:#fff;
    }
    canvas{width:100%;height:auto;border-radius:14px;background:#fff}
    .row{display:flex;gap:12px;flex-wrap:wrap;align-items:flex-start}
    .left{flex:1;min-width:280px}
    .small{font-size:12px;color:var(--muted);line-height:1.4;margin-top:10px}
  </style>
</head>

<body>
  <div class="wrap">
    <!-- 活動頭區 -->
    <div class="card">
      <span class="pill">世界唐氏症日｜北捷彩繪列車</span>
      <h1>因為有你</h1>
      <p class="sub">題目：<b>因為有你，這個世界</b></p>

      <!-- 主視覺（放在 assets/hero.png） -->
      <img class="hero" src="assets/hero.png" alt="因為有你｜主視覺" />

      <p class="small">
        點選一個主題，立即生成「可轉發分享圖」並下載（PNG）。
      </p>

      <!-- 三個按鈕 -->
      <div class="btns" id="topicBtns"></div>
    </div>

    <!-- 生成區 -->
    <div class="card left">
      <h1>你的分享圖（可直接轉發）</h1>
      <canvas id="c" width="1080" height="1920"></canvas>

      <div class="btns">
        <button class="primary" id="downloadBtn">下載分享圖（PNG）</button>
        <button id="regenBtn">重新生成</button>
      </div>

      <p class="small">
        建議用途：IG/FB 限動（1080×1920）。下載後直接上傳限動/貼文即可。
      </p>
    </div>
  </div>

<script>
  /**
   * 你 assets 資料夾需放：
   * - assets/hero.png（主視覺，可有可無；若沒有可刪掉 img）
   * - assets/bg-love.png
   * - assets/bg-hug.png
   * - assets/bg-better.png
   */

  const EXHIBITION_TITLE = "因為有你";
  const MAIN_TOPIC = "因為有你，這個世界";
  const ORG = "唐氏症基金會";

  const OPTIONS = [
    { key:"love",   label:"愛的可能", bg:"assets/bg-love.png" },
    { key:"hug",    label:"擁抱不同", bg:"assets/bg-hug.png" },
    { key:"better", label:"變更好",   bg:"assets/bg-better.png" },
  ];

  const canvas = document.getElementById("c");
  const ctx = canvas.getContext("2d");
  const btnWrap = document.getElementById("topicBtns");

  let current = OPTIONS[0];

  // 建按鈕
  function buildButtons(){
    btnWrap.innerHTML = "";
    OPTIONS.forEach(opt=>{
      const b = document.createElement("button");
      b.textContent = opt.label;
      if(opt.key === current.key) b.classList.add("active");
      b.onclick = ()=>{
        current = opt;
        buildButtons();
        render();
      };
      btnWrap.appendChild(b);
    });
  }

  // 下載
  document.getElementById("downloadBtn").onclick = ()=>{
    const a = document.createElement("a");
    a.download = `${EXHIBITION_TITLE}-${current.label}.png`;
    a.href = canvas.toDataURL("image/png");
    a.click();
  };

  document.getElementById("regenBtn").onclick = render;

  // 主渲染：底圖不同、疊字一致（確保人人看得清楚）
  function render(){
    const img = new Image();
    img.crossOrigin = "anonymous";
